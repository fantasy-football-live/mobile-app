(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6/w4":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("ri9Y"),i=n("U929"),o=n("wp+K"),a=n("CcnG"),u=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function u(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},s=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},c=function(){function t(t,e){this.httpRequestService=t,this.staticDataService=e,this.players=new Map}return t.prototype.ngOnInit=function(){this.load()},t.prototype.load=function(){return u(this,void 0,void 0,function(){var t,e,n,r,i;return s(this,function(o){switch(o.label){case 0:return[4,this.staticDataService.getPlayers()];case 1:for(t=o.sent(),e=new Map,n=0,r=t;n<r.length;n++)e.set((i=r[n]).id,i);return this.players=e,[2]}})})},t.prototype.getPlayerData=function(t){return u(this,void 0,void 0,function(){return s(this,function(e){return[2,this.httpRequestService.fetch("https://fantasy.premierleague.com/drf/element-summary/"+t)]})})},t.prototype.getPlayers=function(){return u(this,void 0,void 0,function(){var t,e,n,r,i;return s(this,function(o){switch(o.label){case 0:return[4,this.staticDataService.getPlayers()];case 1:for(t=o.sent(),e=new Map,n=0,r=t;n<r.length;n++)e.set((i=r[n]).id,i);return[2,e]}})})},t.prototype.createPlayer=function(t){return u(this,void 0,void 0,function(){return s(this,function(e){return[2,new i.a(t)]})})},t.prototype.getPlayerName=function(t,e){return e.get(t).web_name},t.prototype.getPhotoUrl=function(t,e){return"/assets/player_images/p"+e.get(t).photo.replace(/jpg/gi,"webp")},t.prototype.getPlayer=function(t){return u(this,void 0,void 0,function(){return s(this,function(e){return[2,this.players.get(t)]})})},t.prototype.getUpcomingFixtures=function(t){return u(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.getPlayerData(t)];case 1:return[2,e.sent().fixtures]}})})},t.ngInjectableDef=a.S({factory:function(){return new t(a.W(r.a),a.W(o.a))},token:t,providedIn:"root"}),t}()},BeCK:function(t,e,n){"use strict";var r=n("VoQ1"),i=n("mrSG"),o=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.members=r,i}return Object(i.d)(e,t),e}(n("zvcb").a),a=n("CcnG"),u=n("iw74");n.d(e,"a",function(){return l});var s=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function u(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},c=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},l=function(){function t(t,e){this.storage=t,this.leagueService=e,this.customLeaguesKey="custom_leagues",this.customLeagues=[]}return t.prototype.create=function(t,e){return s(this,void 0,void 0,function(){var n,r;return c(this,function(i){return n=this.generateId(),r=new o(n,t,e),this.saveLeague(r),[2]})})},t.prototype.generateId=function(){return(new Date).getTime()},t.prototype.saveLeague=function(t){this.customLeagues.push(t),this.storage.set(this.customLeaguesKey,this.customLeagues)},t.prototype.fetchLeagueData=function(t){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.leagueService.createLeague(t.members,t.name,t.id)];case 1:return[2,e.sent()]}})})},t.prototype.getLeague=function(t){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.storage.get(this.customLeaguesKey)];case 1:return[2,e.sent().find(function(e){return e.id===t})]}})})},t.prototype.getLeagues=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,this.storage.get(this.customLeaguesKey)];case 1:return t=e.sent(),this.customLeagues=t||[],[2,this.customLeagues]}})})},t.prototype.remove=function(t){this.customLeagues=this.customLeagues.filter(function(e){return e.id!==t.id})},t.prototype.saveToDatabase=function(){this.storage.set(this.customLeaguesKey,this.customLeagues)},t.prototype.addMemberToLeague=function(t,e){return s(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return(n=this.customLeagues.find(function(t){return t.id===e})).members.push(t),[4,this.saveToDatabase()];case 1:return r.sent(),[2,n]}})})},t.ngInjectableDef=a.S({factory:function(){return new t(a.W(u.b),a.W(r.a))},token:t,providedIn:"root"}),t}()},E8RB:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("CcnG"),i=n("iw74"),o=function(){function t(t){this.storage=t}return t.prototype.ngOnInit=function(){var t=this;this.storage.get("include-bonus-points").then(function(e){t.inlcudeBonusPoints=e||!1})},t.prototype.getUserSetting=function(){return t=this,void 0,n=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,function(t){switch(t.label){case 0:return[4,this.storage.get("include-bonus-points")];case 1:return[2,t.sent()||!1]}})},new((e=void 0)||(e=Promise))(function(r,i){function o(t){try{u(n.next(t))}catch(e){i(e)}}function a(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new e(function(e){e(t.value)}).then(o,a)}u((n=n.apply(t,[])).next())});var t,e,n},t.prototype.includeBonusPoints=function(){this.updateSetting(!0)},t.prototype.updateSetting=function(t){this.storage.set("include-bonus-points",t)},t.prototype.parseLiveBonusPoints=function(t,e){for(var n=0,r=0,i=t;r<i.length;r++)for(var o=0,a=i[r].stats;o<a.length;o++){var u=a[o];if(u&&u.bps){var s=new Map,c={first:0,second:0,third:0};this.parseBonusPointData(u.bps.a,c,s),this.parseBonusPointData(u.bps.h,c,s);var l=s.get(c.first),f=s.get(c.second),h=s.get(c.third),p=[[],[],[]];l&&l.length>1?(p[2]=l,p[0]=f):f&&f.length>1?(p[2]=l,p[1]=f):(p[0]=h,p[1]=f,p[2]=l);for(var v=0;v<p.length;v++)for(var d=0,y=p[v];d<y.length;d++)y[d].element===e&&(n+=v+1)}}return n},t.prototype.parseBonusPointData=function(t,e,n){for(var r=0,i=t;r<i.length;r++){var o=i[r],a=o.value,u=n.get(a)||[];u.push(o),n.set(o.value,u),a>e.first?(e.third=e.second,e.second=e.first,e.first=a):a>e.second&&a!==e.first?(e.third=e.second,e.second=a):a>e.third&&a!==e.first&&a!==e.second&&(e.third=a)}},t.ngInjectableDef=r.S({factory:function(){return new t(r.W(i.b))},token:t,providedIn:"root"}),t}()},HgAO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("ri9Y"),i=n("CcnG"),o=function(){function t(t){this.httpRequestService=t}return t.prototype.fetch=function(t){return this.httpRequestService.fetch("https://fantasy.premierleague.com/drf/event/"+t+"/live")},t.ngInjectableDef=i.S({factory:function(){return new t(i.W(r.a))},token:t,providedIn:"root"}),t}()},U929:function(t,e,n){"use strict";e.a=function(){return function(t,e,n,r,i,o){void 0===t&&(t=-1),void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=-1),void 0===i&&(i=""),void 0===o&&(o=""),this.id=t,this.image=e,this.fixtures=n,this.gameweekPoints=r,this.name=i,this.position=o}}()},VoQ1:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n,r){void 0===e&&(e=-1),void 0===n&&(n=""),void 0===r&&(r=new Map);var i=t.call(this,e,n)||this;return i.members=r,i}return Object(r.d)(e,t),e.prototype.sort=function(){return Array.from(this.members.values()).sort(function(t,e){return e.team.overallPoints-t.team.overallPoints})},e}(n("zvcb").a),o=n("iFmj"),a=n("ri9Y"),u=n("HgAO"),s=n("wp+K"),c=n("6/w4"),l=n("emr8"),f=n("CcnG");n.d(e,"a",function(){return v});var h=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function u(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},p=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v=function(){function t(t,e,n,r,i){this.staticDataService=t,this.httpRequestService=e,this.fantasyPlayerService=n,this.liveDataService=r,this.soccerPlayerService=i}return t.prototype.createLeague=function(t,e,n){return void 0===n&&(n=null),h(this,void 0,void 0,function(){var r,o,a=this;return p(this,function(u){return r=null,o=null,[2,Promise.all([this.staticDataService.getCurrentGameweek(),this.soccerPlayerService.getPlayers()]).then(function(t){return o=t[1],a.liveDataService.fetch(r=t[0])}).then(function(e){return Promise.all(t.map(function(t){return a.fantasyPlayerService.createPlayer(t,e,o,r).catch(function(){var t=new l.a;return t.id=n,t.name="failed",t})}))}).then(function(t){for(var r=new Map,o=0,a=t;o<a.length;o++){var u=a[o];u&&r.set(u.id,u)}return new i(n,e,r)})]})})},t.prototype.getLeague=function(t){return h(this,void 0,void 0,function(){var e,n;return p(this,function(r){switch(r.label){case 0:return[4,this.httpRequestService.fetch("https://fantasy.premierleague.com/drf/leagues-classic-standings/"+t)];case 1:return e=r.sent(),n=e.standings.results.map(function(t){return t.entry}),[2,this.createLeague(n,e.league.name,e.league.id)]}})})},t.ngInjectableDef=f.S({factory:function(){return new t(f.W(s.a),f.W(a.a),f.W(o.a),f.W(u.a),f.W(c.a))},token:t,providedIn:"root"}),t}()},emr8:function(t,e,n){"use strict";var r=n("r6l9");e.a=function(){return function(t,e,n,i,o,a,u,s,c,l,f,h){void 0===t&&(t=""),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=""),void 0===o&&(o=-1),void 0===a&&(a=0),void 0===u&&(u=0),void 0===s&&(s=-1),void 0===c&&(c=[]),void 0===l&&(l=""),void 0===f&&(f=-1),void 0===h&&(h=new r.a),this.gameweekRank=0,this.overallRank=0,this.activeChip=t,this.bank=e,this.countryImage=i,this.gameweekRank=o,this.gameweekTransfers=a,this.gameweekTransfersCost=u,this.id=s,this.leagues=c,this.leagues.sort(function(t,e){return t.name.localeCompare(e.name,"en",{ignorePunctuation:!0})}),this.name=l,this.overallRank=f,this.team=h,this.value=n,this.customLeagues=[]}}()},iFmj:function(t,e,n){"use strict";var r=n("emr8"),i=n("U929"),o=n("r6l9"),a=n("ri9Y"),u=n("CcnG"),s=function(){function t(t){this.httpRequestService=t}return t.prototype.getGameweekData=function(t,e){return n=this,void 0,i=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,function(n){switch(n.label){case 0:return[4,this.httpRequestService.fetch("https://fantasy.premierleague.com/drf/entry/"+t+"/event/"+e+"/picks")];case 1:return[2,n.sent()]}})},new((r=void 0)||(r=Promise))(function(t,e){function o(t){try{u(i.next(t))}catch(n){e(n)}}function a(t){try{u(i.throw(t))}catch(n){e(n)}}function u(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(o,a)}u((i=i.apply(n,[])).next())});var n,r,i},t.ngInjectableDef=u.S({factory:function(){return new t(u.W(a.a))},token:t,providedIn:"root"}),t}(),c=function(){function t(t){this.httpRequestService=t}return t.prototype.fetch=function(t){return this.httpRequestService.fetch("https://fantasy.premierleague.com/drf/entry/"+t+"/history")},t.ngInjectableDef=u.S({factory:function(){return new t(u.W(a.a))},token:t,providedIn:"root"}),t}(),l=n("6/w4"),f=n("E8RB"),h=n("iw74");n.d(e,"a",function(){return p});var p=function(){function t(t,e,n,r,i){this.gameweekDataService=t,this.gameweekHistoryService=e,this.soccerPlayerService=n,this.storage=r,this.bonusPointService=i,this.positionMap={1:"Goalkeeper",2:"Defender",3:"Midfielder",4:"Forward"}}return t.prototype.createPlayer=function(t,e,n,i){return a=this,void 0,s=function(){var a,u,s,c,l,f,h;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,function(p){switch(p.label){case 0:return[4,this.storage.get(a="id-"+t+" gameweek-"+i)];case 1:return u=p.sent(),s=null,c=null,l=null,f=null,h=null,u?[3,4]:[4,this.gameweekDataService.getGameweekData(t,i)];case 2:return s=p.sent(),[4,this.gameweekHistoryService.fetch(t)];case 3:return f=p.sent(),c=this.parsePlayerData(s,f,i),l=new o.a(t,c.teamName,c.lastWeekOverallPoints),h=new r.a(c.activeChip,c.bank,c.value,c.countryImage,0,c.gameweekTransfers,c.gameweekTransfersCost,t,c.leagues,c.name,c.overallRank,l),this.storage.set(a,{userGameweekData:s,previousGameweeksHistory:f,playerData:c,team:l,newFantasyPlayer:h}),[3,5];case 4:s=u.userGameweekData,f=u.previousGameweeksHistory,l=new o.a(t,(c=u.playerData).teamName,c.lastWeekOverallPoints),(h=u.newFantasyPlayer).team=l,p.label=5;case 5:return this.populateSquad(c.picks,h,e,n),[2,h]}})},new((u=void 0)||(u=Promise))(function(t,e){function n(t){try{i(s.next(t))}catch(n){e(n)}}function r(t){try{i(s.throw(t))}catch(n){e(n)}}function i(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(n,r)}i((s=s.apply(a,[])).next())});var a,u,s},t.prototype.parsePlayerData=function(t,e,n){return{leagues:e.leagues.classic,activeChip:t.active_chip,name:e.entry.player_first_name+" "+e.entry.player_last_name,countryImage:"assets/country_flags/"+e.entry.player_region_short_iso+".gif",teamName:e.entry.name,lastWeekOverallPoints:e.history.find(function(t){return t.event===n-1}).total_points,picks:t.picks,bank:t.entry_history.bank,value:t.entry_history.value,gameweekTransfers:t.entry_history.event_transfers,gameweekTransfersCost:t.entry_history.event_transfers_cost,overallRank:e.history.pop().overall_rank}},t.prototype.populateSquad=function(t,e,n,r){for(var o=0,a=n.elements,u=n.fixtures,s=0,c=t;s<c.length;s++){var l=c[s],f=r.get(l.element),h=this.positionMap[f.element_type],p=this.soccerPlayerService.getPhotoUrl(f.id,r),v=a[f.id].stats,d=v.total_points-v.bonus+this.bonusPointService.parseLiveBonusPoints(u,f.id),y=new i.a(l.element,p,null,d,f.web_name,h);("bboost"===e.activeChip||l.position<12)&&(o+=d*l.multiplier),l.position<12?e.team[h+"s"].push(y):e.team.Bench.push(y),l.is_captain&&(y.gameweekPoints*=l.multiplier,e.team.captainId=l.element,e.team.captainName=y.name,e.team.captainImage=p)}return e.team.gameweekPoints=o,e.team.overallPoints+=o-e.gameweekTransfersCost,null},t.ngInjectableDef=u.S({factory:function(){return new t(u.W(s),u.W(c),u.W(l.a),u.W(h.b),u.W(f.a))},token:t,providedIn:"root"}),t}()},r6l9:function(t,e,n){"use strict";e.a=function(){return function(t,e,n,r,i,o,a,u,s,c,l){void 0===t&&(t=-1),void 0===e&&(e=""),void 0===n&&(n=0),void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===a&&(a=[]),void 0===u&&(u=[]),void 0===s&&(s=0),void 0===c&&(c=0),void 0===l&&(l=0),this.bank=0,this.id=t,this.name=e,this.overallPoints=n,this.gameweekPoints=0,this.Goalkeepers=r,this.Defenders=i,this.Midfielders=o,this.Forwards=a,this.Bench=u,this.captainId=s,this.value=c,this.bank=l}}()},ri9Y:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("ElRG"),i=n("yp2w"),o=n("CcnG"),a=n("sE5F"),u=n("ZYCi"),s=function(){function t(t,e,n,r){this.testHttp=t,this.http=e,this.device=n,this.router=r}return t.prototype.fetch=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),r=this,void 0,o=function(){var r;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,function(i){switch(i.label){case 0:return r=this.parseJsonData,[4,this.fetchData(t,e,n)];case 1:return[2,r.apply(this,[i.sent()])]}})},new((i=void 0)||(i=Promise))(function(t,e){function n(t){try{u(o.next(t))}catch(n){e(n)}}function a(t){try{u(o.throw(t))}catch(n){e(n)}}function u(e){e.done?t(e.value):new i(function(t){t(e.value)}).then(n,a)}u((o=o.apply(r,[])).next())});var r,i,o},t.prototype.parseJsonData=function(t){return"https://fantasy.premierleague.com/updating/"===t.url?(this.router.navigateByUrl("/updating"),null):this.device.cordova?JSON.parse(t.data):t.json()},t.prototype.fetchData=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),this.device.cordova?this.http.get(t,e,n):this.testHttp.get(t).toPromise()},t.ngInjectableDef=o.S({factory:function(){return new t(o.W(a.d),o.W(i.a),o.W(r.a),o.W(u.m))},token:t,providedIn:"root"}),t}()},wSJi:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("iFmj"),i=n("rl29"),o=n("HgAO"),a=n("wp+K"),u=n("6/w4"),s=n("BeCK"),c=n("CcnG"),l=n("iw74"),f=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function u(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},h=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},p=function(){function t(t,e,n,r,i,o,a){this.storage=t,this.fantasyPlayerService=e,this.liveDataService=n,this.staticDataService=r,this.fcmService=i,this.soccerPlayerService=o,this.customLeagueService=a,this.userKey="user"}return t.prototype.loadSavedUser=function(){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=this,[4,this.storage.get(this.userKey)];case 1:return t.user=e.sent(),[2,this.user]}})})},t.prototype.getSavedUserId=function(){return f(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.storage.get(this.userKey)];case 1:return[2,t.sent().id]}})})},t.prototype.save=function(){this.storage.set(this.userKey,this.user)},t.prototype.createUser=function(t){return f(this,void 0,void 0,function(){var e,n,r,i=this;return h(this,function(o){switch(o.label){case 0:return[4,this.staticDataService.getCurrentGameweek()];case 1:return e=o.sent(),[4,this.liveDataService.fetch(e)];case 2:return n=o.sent(),[4,this.soccerPlayerService.getPlayers()];case 3:return r=o.sent(),[4,this.fantasyPlayerService.createPlayer(t,n,r,e).then(function(t){return i.user=t,i.storage.set(i.userKey,t),i.updateDeviceToken(i.user.id),t})];case 4:return[2,o.sent()]}})})},t.prototype.updateDeviceToken=function(t){this.fcmService.getToken(t)},t.prototype.updateUser=function(t){return f(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return[4,this.customLeagueService.getLeagues()];case 1:return e=n.sent(),this.storage.clear(),this.customLeagueService.customLeagues=e,this.customLeagueService.saveToDatabase(),[4,this.createUser(t)];case 2:return[2,n.sent()]}})})},t.prototype.getLivePoints=function(){},t.ngInjectableDef=c.S({factory:function(){return new t(c.W(l.b),c.W(r.a),c.W(o.a),c.W(a.a),c.W(i.a),c.W(u.a),c.W(s.a))},token:t,providedIn:"root"}),t}()},"wp+K":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("ri9Y"),i=n("CcnG"),o=n("iw74"),a=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function u(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},u=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},s=function(){function t(t,e){this.httpRequestService=t,this.storage=e,this.storageKey="bootstrap",this.updateDataTime="update-bootstrap-time"}return t.prototype.fetch=function(t){return void 0===t&&(t=null),a(this,void 0,void 0,function(){var e=this;return u(this,function(n){return[2,this.storage.get(this.updateDataTime).then(function(n){return a(e,void 0,void 0,function(){var e;return u(this,function(r){switch(r.label){case 0:return e=null,n&&Date.now()<=new Date(n).getTime()?[4,this.storage.get(this.storageKey)]:[3,2];case 1:return e=r.sent(),[3,4];case 2:return[4,this.httpRequestService.fetch("https://fantasy.premierleague.com/drf/bootstrap-static")];case 3:e=r.sent(),r.label=4;case 4:return this.staticData=e,this.storage.set(this.updateDataTime,e.next_event_fixtures[0]?e.next_event_fixtures[0].deadline_time:null),this.storage.set(this.storageKey,this.staticData),[2,null!=t?e[t]:e]}})})})]})})},t.prototype.getCurrentGameweek=function(){return a(this,void 0,void 0,function(){return u(this,function(t){return[2,this.fetch("current-event")]})})},t.prototype.getUpcomingFixtures=function(){return a(this,void 0,void 0,function(){return u(this,function(t){return[2,this.fetch("next_event_fixtures")]})})},t.prototype.getTeams=function(){return a(this,void 0,void 0,function(){return u(this,function(t){return[2,this.fetch("teams")]})})},t.prototype.getPlayers=function(){return a(this,void 0,void 0,function(){return u(this,function(t){return[2,this.fetch("elements")]})})},t.prototype.getPositionLabel=function(t){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this.fetch("element_types")];case 1:return[2,e.sent().find(function(e){return e.id===t}).singular_name]}})})},t.ngInjectableDef=i.S({factory:function(){return new t(i.W(r.a),i.W(o.b))},token:t,providedIn:"root"}),t}()},zvcb:function(t,e,n){"use strict";e.a=function(){return function(t,e){this.id=t,this.name=e}}()}}]);